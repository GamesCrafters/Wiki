GamesmanWeb\_Thrift\_-\_Fa09
============================

This was a solo project for the Fall 09 semester

Overview
========

Using Apache Thrift, I replaced the JSON interface between GamesmanJava and GamesmanWeb with a Thrift server/client to allow cleaner code and easier maintainability.

Big Picture
===========

Thrift allows us to abstract away the finer details of networking code. By defining some data structures and functions in a Thrift file, we can use the Thrift compiler to auto-generate code in various different languages that automatically takes care of the finer details of networking. This allows a very nice abstraction between "real" code and networking code on both the client and server side.

Maintenance
===========

The thrift file that I wrote can be found in the GamesmanWeb/Thrift directory. The files that were generated by thrift are located in the appropriate subdirectories in GamesmanJava and GamesmanWeb. The following is a portion of the more significant files generated or modified:

Server-side:

-   GamesmanJava/src/edu/berkeley/gamesman/JSONInterface.java - Starts a Thrift server that handles requests from GamesmanWeb (the name is now a misnomer)
-   GamesmanJava/src/edu/berkeley/gamesman/thrift/\* - contains files generated by Thrift

Client-side:

-   GamesmanWeb/src/edu/berkeley/gcweb/servlet/PuzzleServlet.java - Accepts requests from the user, and queries GamesmanJava for moves and positions
-   GamesmanWeb/src/edu/berkeley/gcweb/servlet/thrift/\* - generated by Thrift

The code in JSONInterface and PuzzleServlet is still pretty messy, but for the most part the higher level Thrift interactions should be pretty clear.

Future
======

The main goal in the future is to incorporate Thrift into the other Gamesman servers (Python and +-). Currently those servers are down, and has been for the entire semester (not sure why, or whether it was ever working).

For anyone who wants to jump on this project, there really isn't any need to know too much about network programming. Thrift can be picked up relatively quickly. What one needs to do is to download the [Thrift](http://incubator.apache.org/thrift/) source code, and build the system on their own computers (Thrift is NOT installed on NYC). The process is for the most part straightforward, and [this wiki](http://wiki.apache.org/thrift/) has pretty good documentation on how to go about doing it. After Thrift is installed on your system, you can now start compiling Thrift files to auto-generate code to be used.

I suggest that anyone starting out with Thrift to try this [Puzzle](http://www.facebook.com/careers/puzzles.php?puzzle_id=13%7CFacebook), which basically involves writing a very simple Thrift client. If one wants to work on the servers, it'd be a good exercise to also write a simple server for that puzzle.
